{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohamedamrin/Desktop/Web2Print/admin/src/app/api/orders/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\n\n// POINTING TO THE SHARED FILE IN PARENT DIRECTORY\nconst DATA_FILE = path.join(process.cwd(), '../src/data/orders.json');\n\nexport async function GET() {\n    try {\n        if (fs.existsSync(DATA_FILE)) {\n            const fileContent = fs.readFileSync(DATA_FILE, 'utf-8');\n            const orders = JSON.parse(fileContent || '[]');\n            return NextResponse.json(orders);\n        }\n        return NextResponse.json([]);\n    } catch (error) {\n        console.error(\"Failed to read orders:\", error);\n        return NextResponse.json({ error: \"Failed to read\" }, { status: 500 });\n    }\n}\n\nexport async function PUT(request: Request) {\n    try {\n        const { id, status } = await request.json();\n\n        if (fs.existsSync(DATA_FILE)) {\n            const fileContent = fs.readFileSync(DATA_FILE, 'utf-8');\n            let orders = JSON.parse(fileContent || '[]');\n\n            // Update specific order\n            orders = orders.map((o: any) => {\n                if (o.id === id) {\n                    const updated = { ...o, status };\n                    // Add history if needed (simplified for FS)\n                    if (!updated.history) updated.history = [];\n                    updated.history.push({\n                        date: new Date().toISOString(),\n                        action: \"Status Change\",\n                        details: `Moved from ${o.status} to ${status}`,\n                        user: \"Admin\"\n                    });\n                    return updated;\n                }\n                return o;\n            });\n\n            fs.writeFileSync(DATA_FILE, JSON.stringify(orders, null, 2));\n            return NextResponse.json({ success: true });\n        }\n        return NextResponse.json({ error: \"Database not found\" }, { status: 404 });\n\n    } catch (error) {\n        console.error(\"Failed to update order:\", error);\n        return NextResponse.json({ error: \"Failed to update\" }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,kDAAkD;AAClD,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAEpC,eAAe;IAClB,IAAI;QACA,IAAI,wGAAE,CAAC,UAAU,CAAC,YAAY;YAC1B,MAAM,cAAc,wGAAE,CAAC,YAAY,CAAC,WAAW;YAC/C,MAAM,SAAS,KAAK,KAAK,CAAC,eAAe;YACzC,OAAO,yJAAY,CAAC,IAAI,CAAC;QAC7B;QACA,OAAO,yJAAY,CAAC,IAAI,CAAC,EAAE;IAC/B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,yJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;AACJ;AAEO,eAAe,IAAI,OAAgB;IACtC,IAAI;QACA,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEzC,IAAI,wGAAE,CAAC,UAAU,CAAC,YAAY;YAC1B,MAAM,cAAc,wGAAE,CAAC,YAAY,CAAC,WAAW;YAC/C,IAAI,SAAS,KAAK,KAAK,CAAC,eAAe;YAEvC,wBAAwB;YACxB,SAAS,OAAO,GAAG,CAAC,CAAC;gBACjB,IAAI,EAAE,EAAE,KAAK,IAAI;oBACb,MAAM,UAAU;wBAAE,GAAG,CAAC;wBAAE;oBAAO;oBAC/B,4CAA4C;oBAC5C,IAAI,CAAC,QAAQ,OAAO,EAAE,QAAQ,OAAO,GAAG,EAAE;oBAC1C,QAAQ,OAAO,CAAC,IAAI,CAAC;wBACjB,MAAM,IAAI,OAAO,WAAW;wBAC5B,QAAQ;wBACR,SAAS,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,IAAI,EAAE,QAAQ;wBAC9C,MAAM;oBACV;oBACA,OAAO;gBACX;gBACA,OAAO;YACX;YAEA,wGAAE,CAAC,aAAa,CAAC,WAAW,KAAK,SAAS,CAAC,QAAQ,MAAM;YACzD,OAAO,yJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAK;QAC7C;QACA,OAAO,yJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAE5E,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,yJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACJ"}}]
}